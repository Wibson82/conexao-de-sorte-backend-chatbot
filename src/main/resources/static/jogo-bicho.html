<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé∞ Jogo do Bicho - Sistema de Apostas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .menu-section {
            margin-bottom: 30px;
        }

        .menu-title {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .menu-item {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            border: none;
            font-size: 1.1em;
            font-weight: bold;
        }

        .menu-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .menu-item.secondary {
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
        }

        .menu-item.info {
            background: linear-gradient(135deg, #fd79a8, #e84393);
        }

        .response-area {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            min-height: 200px;
            border: 2px solid #e9ecef;
        }

        .response-title {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .response-content {
            line-height: 1.6;
            color: #555;
        }

        .grupos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .grupo-item {
            background: #e3f2fd;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
            color: #1976d2;
        }

        .loading {
            text-align: center;
            color: #666;
            font-style: italic;
        }

        .error {
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #c62828;
        }

        .success {
            background: #e8f5e8;
            color: #2e7d32;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #2e7d32;
        }

        .status-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 15px;
            border-radius: 20px;
            color: white;
            font-weight: bold;
            z-index: 1000;
        }

        .status-online {
            background: #27ae60;
        }

        .status-offline {
            background: #e74c3c;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .content {
                padding: 20px;
            }
            
            .menu-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="status" class="status-indicator status-offline">üî¥ Offline</div>
    
    <div class="container">
        <div class="header">
            <h1>üé∞ Jogo do Bicho</h1>
            <p>Sistema de Apostas Online</p>
        </div>
        
        <div class="content">
            <div class="menu-section">
                <div class="menu-title">üéØ A√ß√µes Principais</div>
                <div class="menu-grid">
                    <button class="menu-item" onclick="testarConexao()">
                        üîó Testar Conex√£o
                    </button>
                    <button class="menu-item" onclick="verGrupos()">
                        üê¶ Ver Grupos
                    </button>
                    <button class="menu-item secondary" onclick="verRegras()">
                        üìñ Ver Regras
                    </button>
                    <button class="menu-item secondary" onclick="verPagamentos()">
                        üí∞ Ver Pagamentos
                    </button>
                </div>
            </div>

            <div class="menu-section">
                <div class="menu-title">üìä Informa√ß√µes</div>
                <div class="menu-grid">
                    <button class="menu-item info" onclick="verResultados()">
                        üèÜ √öltimos Resultados
                    </button>
                    <button class="menu-item info" onclick="simularAposta()">
                        üé≤ Simular Aposta
                    </button>
                </div>
            </div>

            <div class="response-area">
                <div class="response-title">üìã Informa√ß√µes do Sistema</div>
                <div id="response-content" class="response-content">
                    <p>Bem-vindo ao Sistema de Apostas do Jogo do Bicho!</p>
                    <p>Use os bot√µes acima para navegar pelas funcionalidades dispon√≠veis.</p>
                    <p><strong>Funcionalidades:</strong></p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Consultar tabela de grupos e animais</li>
                        <li>Ver regras de cada tipo de aposta</li>
                        <li>Consultar tabela de pagamentos</li>
                        <li>Ver √∫ltimos resultados dos sorteios</li>
                        <li>Simular apostas (demonstra√ß√£o)</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = '/rest/v1/jogo-bicho';
        let isOnline = false;

        // Testar conex√£o na inicializa√ß√£o
        window.onload = function() {
            testarConexao();
        };

        async function testarConexao() {
            try {
                showLoading('Testando conex√£o com o servidor...');
                const response = await fetch(`${API_BASE}/health`);
                const data = await response.json();
                
                if (data.status === 'OK') {
                    isOnline = true;
                    updateStatus(true);
                    showSuccess(`‚úÖ Conex√£o estabelecida! Servi√ßo: ${data.service} v${data.version}`);
                } else {
                    throw new Error('Resposta inv√°lida do servidor');
                }
            } catch (error) {
                isOnline = false;
                updateStatus(false);
                showError(`‚ùå Erro de conex√£o: ${error.message}`);
            }
        }

        async function verGrupos() {
            if (!isOnline) {
                showError('‚ùå Sistema offline. Teste a conex√£o primeiro.');
                return;
            }

            try {
                showLoading('Carregando tabela de grupos...');
                const response = await fetch(`${API_BASE}/grupos`);
                const data = await response.json();
                
                if (data.success) {
                    let html = '<h3>üê¶ Tabela de Grupos do Jogo do Bicho</h3>';
                    html += '<div class="grupos-grid">';
                    
                    data.grupos.forEach(grupo => {
                        html += `<div class="grupo-item">${grupo}</div>`;
                    });
                    
                    html += '</div>';
                    html += '<p style="margin-top: 15px;"><strong>Nota:</strong> Cada grupo possui 4 n√∫meros sequenciais (ex: Avestruz = 01, 02, 03, 04)</p>';
                    
                    showContent('üê¶ Grupos do Jogo do Bicho', html);
                } else {
                    showError('‚ùå Erro ao carregar grupos');
                }
            } catch (error) {
                showError(`‚ùå Erro: ${error.message}`);
            }
        }

        async function verRegras() {
            if (!isOnline) {
                showError('‚ùå Sistema offline. Teste a conex√£o primeiro.');
                return;
            }

            try {
                showLoading('Carregando regras do jogo...');
                const response = await fetch(`${API_BASE}/regras`);
                const data = await response.json();
                
                if (data.success) {
                    let html = '<h3>üìñ Regras do Jogo do Bicho</h3>';
                    
                    Object.entries(data.regras).forEach(([tipo, regra]) => {
                        html += `<div style="margin-bottom: 15px; padding: 10px; background: #f0f8ff; border-radius: 5px;">`;
                        html += `<strong>${tipo.toUpperCase()}:</strong> ${regra}`;
                        html += `</div>`;
                    });
                    
                    showContent('üìñ Regras do Jogo', html);
                } else {
                    showError('‚ùå Erro ao carregar regras');
                }
            } catch (error) {
                showError(`‚ùå Erro: ${error.message}`);
            }
        }

        async function verPagamentos() {
            if (!isOnline) {
                showError('‚ùå Sistema offline. Teste a conex√£o primeiro.');
                return;
            }

            try {
                showLoading('Carregando tabela de pagamentos...');
                const response = await fetch(`${API_BASE}/pagamentos`);
                const data = await response.json();
                
                if (data.success) {
                    let html = '<h3>üí∞ Tabela de Pagamentos</h3>';
                    
                    Object.entries(data.pagamentos).forEach(([tipo, pagamento]) => {
                        html += `<div style="margin-bottom: 10px; padding: 10px; background: #f0fff0; border-radius: 5px; display: flex; justify-content: space-between;">`;
                        html += `<strong>${tipo.replace('_', ' ').toUpperCase()}:</strong>`;
                        html += `<span style="color: #27ae60; font-weight: bold;">${pagamento}</span>`;
                        html += `</div>`;
                    });
                    
                    html += '<p style="margin-top: 15px; font-style: italic; color: #666;">* Valores podem variar conforme a casa lot√©rica</p>';
                    
                    showContent('üí∞ Pagamentos', html);
                } else {
                    showError('‚ùå Erro ao carregar pagamentos');
                }
            } catch (error) {
                showError(`‚ùå Erro: ${error.message}`);
            }
        }

        async function verResultados() {
            if (!isOnline) {
                showError('‚ùå Sistema offline. Teste a conex√£o primeiro.');
                return;
            }

            try {
                showLoading('Carregando √∫ltimos resultados...');
                const response = await fetch(`${API_BASE}/resultados`);
                const data = await response.json();
                
                if (data.success) {
                    const resultado = data.resultado;
                    let html = '<h3>üèÜ √öltimos Resultados</h3>';
                    html += `<div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-bottom: 15px;">`;
                    html += `<strong>üìÖ Data:</strong> ${resultado.data} | <strong>‚è∞ Hor√°rio:</strong> ${resultado.horario}`;
                    html += `</div>`;
                    
                    html += `<div style="display: grid; gap: 10px;">`;
                    html += `<div style="background: #d4edda; padding: 10px; border-radius: 5px;"><strong>ü•á 1¬∫ Pr√™mio:</strong> ${resultado.primeiro}</div>`;
                    html += `<div style="background: #cce5ff; padding: 10px; border-radius: 5px;"><strong>ü•à 2¬∫ Pr√™mio:</strong> ${resultado.segundo}</div>`;
                    html += `<div style="background: #ffe6cc; padding: 10px; border-radius: 5px;"><strong>ü•â 3¬∫ Pr√™mio:</strong> ${resultado.terceiro}</div>`;
                    html += `<div style="background: #f0f0f0; padding: 10px; border-radius: 5px;"><strong>4¬∫ Pr√™mio:</strong> ${resultado.quarto}</div>`;
                    html += `<div style="background: #f0f0f0; padding: 10px; border-radius: 5px;"><strong>5¬∫ Pr√™mio:</strong> ${resultado.quinto}</div>`;
                    html += `</div>`;
                    
                    html += '<p style="margin-top: 15px; font-style: italic; color: #666;">* Resultados simulados para demonstra√ß√£o</p>';
                    
                    showContent('üèÜ Resultados', html);
                } else {
                    showError('‚ùå Erro ao carregar resultados');
                }
            } catch (error) {
                showError(`‚ùå Erro: ${error.message}`);
            }
        }

        async function simularAposta() {
            if (!isOnline) {
                showError('‚ùå Sistema offline. Teste a conex√£o primeiro.');
                return;
            }

            try {
                showLoading('Simulando aposta...');
                
                const apostaData = {
                    tipo: 'grupo',
                    valor: 5.00,
                    numero: Math.floor(Math.random() * 25) + 1,
                    modalidade: 'cabeca'
                };
                
                const response = await fetch(`${API_BASE}/aposta`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(apostaData)
                });
                
                const data = await response.json();
                
                if (data.success) {
                    let html = '<h3>üé≤ Simula√ß√£o de Aposta</h3>';
                    html += `<div style="background: #d4edda; padding: 15px; border-radius: 5px; margin-bottom: 15px;">`;
                    html += `<strong>‚úÖ ${data.message}</strong>`;
                    html += `</div>`;
                    
                    html += `<div style="background: #f8f9fa; padding: 15px; border-radius: 5px;">`;
                    html += `<p><strong>üé´ C√≥digo:</strong> ${data.codigo}</p>`;
                    html += `<p><strong>üéØ Tipo:</strong> ${data.tipo}</p>`;
                    html += `<p><strong>üí∞ Valor:</strong> R$ ${parseFloat(data.valor).toFixed(2)}</p>`;
                    html += `<p><strong>üê¶ Grupo:</strong> ${apostaData.numero} (${getGrupoName(apostaData.numero)})</p>`;
                    html += `</div>`;
                    
                    html += '<p style="margin-top: 15px; font-style: italic; color: #666;">* Esta √© apenas uma simula√ß√£o para demonstra√ß√£o</p>';
                    
                    showContent('üé≤ Aposta Simulada', html);
                } else {
                    showError(`‚ùå ${data.error}`);
                }
            } catch (error) {
                showError(`‚ùå Erro: ${error.message}`);
            }
        }

        function getGrupoName(numero) {
            const grupos = [
                'Avestruz', '√Åguia', 'Burro', 'Borboleta', 'Cachorro',
                'Cabra', 'Carneiro', 'Camelo', 'Cobra', 'Coelho',
                'Cavalo', 'Elefante', 'Galo', 'Gato', 'Jacar√©',
                'Le√£o', 'Macaco', 'Porco', 'Pav√£o', 'Peru',
                'Touro', 'Tigre', 'Urso', 'Veado', 'Vaca'
            ];
            return grupos[numero - 1] || 'Desconhecido';
        }

        function updateStatus(online) {
            const statusEl = document.getElementById('status');
            if (online) {
                statusEl.textContent = 'üü¢ Online';
                statusEl.className = 'status-indicator status-online';
            } else {
                statusEl.textContent = 'üî¥ Offline';
                statusEl.className = 'status-indicator status-offline';
            }
        }

        function showLoading(message) {
            const content = document.getElementById('response-content');
            content.innerHTML = `<div class="loading">‚è≥ ${message}</div>`;
        }

        function showError(message) {
            const content = document.getElementById('response-content');
            content.innerHTML = `<div class="error">${message}</div>`;
        }

        function showSuccess(message) {
            const content = document.getElementById('response-content');
            content.innerHTML = `<div class="success">${message}</div>`;
        }

        function showContent(title, html) {
            const content = document.getElementById('response-content');
            content.innerHTML = html;
        }
    </script>
</body>
</html>
